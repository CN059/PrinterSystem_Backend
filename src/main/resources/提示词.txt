è¯·å¸®æˆ‘å¼€å‘ä¸€ä¸ªæ‰“å°é¢„çº¦ç³»ç»Ÿï¼Œå‰ç«¯ä½¿ç”¨ Vue3 + TypeScript + ElementPlus + Pinia + Vue Router + Axiosï¼Œåç«¯ä½¿ç”¨ Spring Boot 3 + MyBatis + MySQL + Sa-Tokenã€‚ä¸»è¦åŠŸèƒ½åŒ…æ‹¬ç”¨æˆ·æ³¨å†Œç™»å½•ã€æ–‡æ¡£ä¸Šä¼ ã€è®¾ç½®æ‰“å°å‚æ•°ã€é¢„çº¦æ—¶é—´ã€ç”Ÿæˆè®¢å•ã€æ”¯ä»˜æ¨¡æ‹Ÿã€è®¢å•çŠ¶æ€è·Ÿè¸ªç­‰ï¼Œç®¡ç†å‘˜å¯ç®¡ç†ç”¨æˆ·å’Œè®¢å•ã€‚

è¿™æ˜¯æˆ‘çš„æ•°æ®åº“è„šæœ¬ï¼Œè®°å½•äº†æ•°æ®åº“ç»“æ„
-- åˆ›å»ºæ•°æ®åº“
CREATE DATABASE IF NOT EXISTS print_service_system
  DEFAULT CHARACTER SET utf8mb4
  COLLATE utf8mb4_unicode_ci;
USE print_service_system;
-- ç”¨æˆ·è¡¨ï¼šè®°å½•ç³»ç»Ÿç”¨æˆ·ä¿¡æ¯
CREATE TABLE users (
  id BIGINT UNSIGNED AUTO_INCREMENT PRIMARY KEY COMMENT 'ç”¨æˆ·ID',
  account VARCHAR(50) NOT NULL UNIQUE COMMENT 'ç™»å½•è´¦å·ï¼ˆå¯ä¸ºæ‰‹æœºå·/é‚®ç®±/è‡ªå®šä¹‰è´¦å·ï¼‰',
  username VARCHAR(50) NOT NULL COMMENT 'ç”¨æˆ·æ˜µç§°',
  password VARCHAR(255) NOT NULL COMMENT 'åŠ å¯†åçš„å¯†ç ',
  phone VARCHAR(20) COMMENT 'æ‰‹æœºå·',
  email VARCHAR(100) COMMENT 'é‚®ç®±åœ°å€',
  role ENUM('USER', 'ADMIN') NOT NULL DEFAULT 'USER' COMMENT 'è§’è‰²',
  status ENUM('ENABLED', 'DISABLED') NOT NULL DEFAULT 'ENABLED' COMMENT 'è´¦æˆ·çŠ¶æ€',
  exp INT UNSIGNED NOT NULL DEFAULT 0 COMMENT 'ç”¨æˆ·ç»éªŒå€¼ï¼ˆæ¯æ‰“å°ä¸€é¢+2 EXPï¼‰',
  created_at DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT 'åˆ›å»ºæ—¶é—´',
  INDEX idx_account (account),
  INDEX idx_username (username),
  INDEX idx_phone (phone),
  INDEX idx_email (email)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci COMMENT='ç”¨æˆ·è¡¨';
-- åœ°å€è¡¨ï¼šè®°å½•ç”¨æˆ·çš„å¤šä¸ªæ”¶è´§åœ°å€ï¼Œå¹¶æ”¯æŒè®¾ç½®é»˜è®¤åœ°å€
CREATE TABLE addresses (
  id BIGINT UNSIGNED AUTO_INCREMENT PRIMARY KEY COMMENT 'åœ°å€ID',
  user_id BIGINT UNSIGNED NOT NULL COMMENT 'å…³è”ç”¨æˆ·ID',
  full_address VARCHAR(512) NOT NULL COMMENT 'å®Œæ•´åœ°å€',
  receiver_name VARCHAR(50) NOT NULL COMMENT 'æ”¶ä»¶äººå§“å',
  receiver_phone VARCHAR(20) NOT NULL COMMENT 'æ”¶ä»¶äººç”µè¯',
  is_default BOOLEAN NOT NULL DEFAULT FALSE COMMENT 'æ˜¯å¦ä¸ºé»˜è®¤åœ°å€',
  created_at DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT 'åˆ›å»ºæ—¶é—´',
  FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE,
  INDEX idx_user_id (user_id),
  INDEX idx_is_default (is_default)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci COMMENT='åœ°å€è¡¨';
-- æ–‡æ¡£è¡¨ï¼šè®°å½•ç”¨æˆ·ä¸Šä¼ çš„æ‰“å°æ–‡ä»¶ä¿¡æ¯
CREATE TABLE documents (
  id BIGINT UNSIGNED AUTO_INCREMENT PRIMARY KEY COMMENT 'æ–‡æ¡£ID',
  user_id BIGINT UNSIGNED NOT NULL COMMENT 'ä¸Šä¼ è€…ID',
  file_name VARCHAR(255) NOT NULL COMMENT 'æ–‡ä»¶å',
  file_path VARCHAR(512) NOT NULL COMMENT 'å­˜å‚¨è·¯å¾„',
  page_count INT NOT NULL COMMENT 'é¡µé¢æ•°',
  uploaded_at DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT 'ä¸Šä¼ æ—¶é—´',
  is_printed BOOLEAN NOT NULL DEFAULT FALSE COMMENT 'æ˜¯å¦å·²æ‰“å°',
  FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE,
  INDEX idx_user_id (user_id),
  INDEX idx_uploaded_at (uploaded_at)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci COMMENT='æ–‡æ¡£è¡¨';
-- æ‰“å°è®¢å•è¡¨ï¼šè®°å½•ç”¨æˆ·çš„æ‰“å°è®¢å•è¯¦æƒ…
CREATE TABLE print_orders (
  id BIGINT UNSIGNED AUTO_INCREMENT PRIMARY KEY COMMENT 'è®¢å•ID',
  order_no VARCHAR(50) NOT NULL UNIQUE COMMENT 'è®¢å•ç¼–å·',
  user_id BIGINT UNSIGNED NOT NULL COMMENT 'å…³è”ç”¨æˆ·ID',
  document_id BIGINT UNSIGNED NOT NULL COMMENT 'å…³è”æ–‡æ¡£ID',
  address_id BIGINT UNSIGNED COMMENT 'å®é™…é€‰æ‹©çš„æ”¶è´§åœ°å€ID',
  total_pages INT NOT NULL COMMENT 'æ€»é¡µæ•°',
  price DECIMAL(10,2) NOT NULL DEFAULT 0.00 COMMENT 'è®¢å•æ€»ä»·',
  print_range VARCHAR(50) NOT NULL COMMENT 'æ‰“å°èŒƒå›´ï¼ˆALL / CUSTOMï¼‰',
  duplex BOOLEAN NOT NULL COMMENT 'æ˜¯å¦åŒé¢æ‰“å°',
  orientation VARCHAR(50) NOT NULL COMMENT 'çº¸å¼ æ–¹å‘ï¼ˆPORTRAIT / LANDSCAPEï¼‰',
  binding VARCHAR(50) NOT NULL COMMENT 'è£…è®¢è¾¹ï¼ˆLEFT / TOPï¼‰',
  copies INT NOT NULL COMMENT 'æ‰“å°ä»½æ•°',
  remark TEXT COMMENT 'ç”¨æˆ·å¤‡æ³¨',
  status ENUM('UNPAID','PAID','PROCESSING','READY_TO_SEND','COMPLETED') NOT NULL DEFAULT 'UNPAID' COMMENT 'è®¢å•çŠ¶æ€',
  created_at DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT 'è®¢å•æäº¤æ—¶é—´',
  paid_at DATETIME COMMENT 'æ”¯ä»˜æ—¶é—´',
  completed_at DATETIME COMMENT 'å¤„ç†å®Œæˆæ—¶é—´',
  shipping_remark TEXT COMMENT 'é…é€å¤‡æ³¨ä¿¡æ¯',
  FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE,
  FOREIGN KEY (document_id) REFERENCES documents(id) ON DELETE CASCADE,
  FOREIGN KEY (address_id) REFERENCES addresses(id) ON DELETE SET NULL,
  INDEX idx_status (status),
  INDEX idx_created_at (created_at)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci COMMENT='æ‰“å°è®¢å•è¡¨';
-- ç³»ç»Ÿç»Ÿè®¡è¡¨ï¼šæ¯æ—¥ç»Ÿè®¡ç³»ç»Ÿçš„æ‰“å°æ•°æ®å’Œæ”¶å…¥æƒ…å†µ
CREATE TABLE system_statistics (
  id BIGINT UNSIGNED AUTO_INCREMENT PRIMARY KEY COMMENT 'ç»Ÿè®¡ID',
  date DATE NOT NULL UNIQUE COMMENT 'ç»Ÿè®¡æ—¥æœŸ',
  total_orders INT NOT NULL DEFAULT 0 COMMENT 'å½“æ—¥æ€»è®¢å•æ•°',
  total_printed_pages INT NOT NULL DEFAULT 0 COMMENT 'å½“æ—¥æ€»æ‰“å°é¡µæ•°',
  total_income DECIMAL(10,2) NOT NULL DEFAULT 0.00 COMMENT 'å½“æ—¥æ€»æ”¶å…¥',
  updated_at DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT 'æœ€åæ›´æ–°æ—¶é—´',
  INDEX uk_date (date),
  INDEX idx_updated_at (updated_at)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci COMMENT='ç³»ç»Ÿç»Ÿè®¡è¡¨';

è¿™æ˜¯APIæ–‡æ¡£å†…å®¹:"

---

### æ¥å£æ€»è¿°

æ‰€æœ‰ç”¨æˆ·æ¥å£å‡è¿”å›ç»Ÿä¸€æ ¼å¼ï¼š

```json
{
  "ifSuccess": true,
  "status": 200,
  "response": "æ“ä½œæˆåŠŸ",
  "data": {}
}
```

å…¶ä¸­ï¼š
- `ifSuccess`: æ“ä½œæ˜¯å¦æˆåŠŸï¼ˆå¸ƒå°”å€¼ï¼‰
- `status`: HTTP çŠ¶æ€ç ï¼ˆæ•´æ•°ï¼‰
- `response`: æ“ä½œç»“æœæè¿°ä¿¡æ¯ï¼ˆå­—ç¬¦ä¸²ï¼‰
- `data`: è¿”å›æ•°æ®ï¼ˆå¯¹è±¡æˆ–æ•°ç»„ï¼‰

---

### æ¥å£åˆ—è¡¨

#### 1. ç”¨æˆ·æ³¨å†Œ
**è·¯å¾„**: `POST /api/user/register`
**åŠŸèƒ½**: æ³¨å†Œæ–°ç”¨æˆ·
**è¯·æ±‚ä½“å‚æ•°**:
- `account`: ç™»å½•è´¦å·ï¼ˆå­—ç¬¦ä¸²ï¼Œå¿…å¡«ï¼‰
- `username`: æ˜µç§°ï¼ˆå­—ç¬¦ä¸²ï¼Œå¿…å¡«ï¼‰
- `password`: å¯†ç ï¼ˆå­—ç¬¦ä¸²ï¼Œå¿…å¡«ï¼‰
- `phone`: æ‰‹æœºå·ï¼ˆå­—ç¬¦ä¸²ï¼Œå¯é€‰ï¼‰
- `email`: é‚®ç®±ï¼ˆå­—ç¬¦ä¸²ï¼Œå¯é€‰ï¼‰
**å“åº”å­—æ®µ**:
- `id`: ç”¨æˆ·ID
- `account`, `username`, `role`, `created_at`

---

#### 2. ç”¨æˆ·ç™»å½•
**è·¯å¾„**: `POST /api/user/login`
**åŠŸèƒ½**: ç”¨æˆ·ç™»å½•ç³»ç»Ÿ
**è¯·æ±‚ä½“å‚æ•°**:
- `account`: ç™»å½•è´¦å·ï¼ˆå­—ç¬¦ä¸²ï¼Œå¿…å¡«ï¼‰
- `password`: å¯†ç ï¼ˆå­—ç¬¦ä¸²ï¼Œå¿…å¡«ï¼‰
**å“åº”å­—æ®µ**:
- `token`: è®¿é—®ä»¤ç‰Œï¼ˆå­—ç¬¦ä¸²ï¼‰
- `userId`, `username`, `role`

---

#### 3. è·å–å½“å‰ç”¨æˆ·ä¿¡æ¯
**è·¯å¾„**: `GET /api/user/me`
**åŠŸèƒ½**: è·å–å½“å‰ç™»å½•ç”¨æˆ·çš„åŸºæœ¬ä¿¡æ¯
**è¯·æ±‚å¤´å‚æ•°**:
- `satoken`: ç”¨æˆ·é‰´æƒ Tokenï¼ˆå­—ç¬¦ä¸²ï¼‰
**å“åº”å­—æ®µ**:
- `id`, `account`, `username`, `phone`, `email`, `role`, `exp`, `status`, `created_at`

---

#### 4. ä¿®æ”¹ä¸ªäººä¿¡æ¯
**è·¯å¾„**: `PATCH /api/user/update`
**åŠŸèƒ½**: æ›´æ–°å½“å‰ç”¨æˆ·çš„æ˜µç§°ã€æ‰‹æœºå·ã€é‚®ç®±ç­‰ä¿¡æ¯
**è¯·æ±‚å¤´å‚æ•°**:
- `satoken`: ç”¨æˆ·é‰´æƒ Tokenï¼ˆå­—ç¬¦ä¸²ï¼‰
**è¯·æ±‚ä½“å‚æ•°**ï¼ˆå¯é€‰ï¼‰:
- `username`: æ–°æ˜µç§°ï¼ˆå­—ç¬¦ä¸²ï¼‰
- `phone`: æ–°æ‰‹æœºå·ï¼ˆå­—ç¬¦ä¸²ï¼‰
- `email`: æ–°é‚®ç®±ï¼ˆå­—ç¬¦ä¸²ï¼‰
**å“åº”å­—æ®µ**:
- `username`, `phone`, `email`ï¼ˆæ›´æ–°åçš„ä¿¡æ¯ï¼‰

---

#### 5. ä¿®æ”¹å¯†ç 
**è·¯å¾„**: `POST /api/user/change-password`
**åŠŸèƒ½**: ä¿®æ”¹å½“å‰ç”¨æˆ·å¯†ç 
**è¯·æ±‚å¤´å‚æ•°**:
- `satoken`: ç”¨æˆ·é‰´æƒ Tokenï¼ˆå­—ç¬¦ä¸²ï¼‰
**è¯·æ±‚ä½“å‚æ•°**:
- `oldPassword`: æ—§å¯†ç ï¼ˆå­—ç¬¦ä¸²ï¼Œå¿…å¡«ï¼‰
- `newPassword`: æ–°å¯†ç ï¼ˆå­—ç¬¦ä¸²ï¼Œå¿…å¡«ï¼‰
**å“åº”å­—æ®µ**: æ—  data

---

#### 6. è·å–ç”¨æˆ·ç»éªŒä¸ç­‰çº§
**è·¯å¾„**: `GET /api/user/exp`
**åŠŸèƒ½**: è·å–å½“å‰ç”¨æˆ·çš„æ‰“å°ç»éªŒå€¼å’Œå¯¹åº”ç­‰çº§
**è¯·æ±‚å¤´å‚æ•°**:
- `satoken`: ç”¨æˆ·é‰´æƒ Tokenï¼ˆå­—ç¬¦ä¸²ï¼‰
**å“åº”å­—æ®µ**:
- `exp`: ç»éªŒå€¼ï¼ˆæ•´æ•°ï¼‰
- `level`: å¯¹åº”ç­‰çº§ï¼ˆæ•´æ•°ï¼‰

---

#### 7. è·å–ç”¨æˆ·è®¢å•åˆ—è¡¨ï¼ˆåˆ†é¡µï¼‰
**è·¯å¾„**: `GET /api/user/orders`
**åŠŸèƒ½**: åˆ†é¡µè·å–å½“å‰ç”¨æˆ·çš„æ‰€æœ‰æ‰“å°è®¢å•
**è¯·æ±‚å¤´å‚æ•°**:
- `satoken`: ç”¨æˆ·é‰´æƒ Tokenï¼ˆå­—ç¬¦ä¸²ï¼‰
**æŸ¥è¯¢å‚æ•°**:
- `page`: å½“å‰é¡µç ï¼ˆå­—ç¬¦ä¸²ï¼Œé»˜è®¤ä¸º1ï¼‰
- `size`: æ¯é¡µæ•°é‡ï¼ˆå­—ç¬¦ä¸²ï¼Œé»˜è®¤ä¸º10ï¼‰
**å“åº”å­—æ®µ**:
- `list`: è®¢å•æ•°ç»„ï¼Œæ¯é¡¹åŒ…å«ï¼š
  - `id`, `orderNo`, `totalPages`, `price`, `duplex`, `copies`, `status`, `createdAt`
- `total`: æ€»è®°å½•æ•°ï¼ˆæ•´æ•°ï¼‰

---

#### 8. è·å–ç”¨æˆ·åœ°å€åˆ—è¡¨
**è·¯å¾„**: `GET /api/user/addresses`
**åŠŸèƒ½**: è·å–å½“å‰ç”¨æˆ·ä¿å­˜çš„æ‰€æœ‰æ”¶è´§åœ°å€
**è¯·æ±‚å¤´å‚æ•°**:
- `satoken`: ç”¨æˆ·é‰´æƒ Tokenï¼ˆå­—ç¬¦ä¸²ï¼‰
**å“åº”å­—æ®µ**:
- åœ°å€æ•°ç»„ï¼Œæ¯é¡¹åŒ…å«ï¼š
  - `id`, `fullAddress`, `receiverName`, `receiverPhone`, `isDefault`

---

#### 9. æ·»åŠ ç”¨æˆ·åœ°å€
**è·¯å¾„**: `POST /api/user/address/add`
**åŠŸèƒ½**: æ·»åŠ ä¸€ä¸ªæ–°çš„æ”¶è´§åœ°å€
**è¯·æ±‚å¤´å‚æ•°**:
- `satoken`: ç”¨æˆ·é‰´æƒ Tokenï¼ˆå­—ç¬¦ä¸²ï¼‰
**è¯·æ±‚ä½“å‚æ•°**:
- `fullAddress`: å®Œæ•´åœ°å€ï¼ˆå­—ç¬¦ä¸²ï¼Œå¿…å¡«ï¼‰
- `receiverName`: æ”¶ä»¶äººå§“åï¼ˆå­—ç¬¦ä¸²ï¼Œå¿…å¡«ï¼‰
- `receiverPhone`: æ”¶ä»¶äººç”µè¯ï¼ˆå­—ç¬¦ä¸²ï¼Œå¿…å¡«ï¼‰
- `isDefault`: æ˜¯å¦è®¾ä¸ºé»˜è®¤åœ°å€ï¼ˆå¸ƒå°”å€¼ï¼Œå¯é€‰ï¼‰
**å“åº”å­—æ®µ**:
- `id`, `fullAddress`, `receiverName`, `receiverPhone`, `isDefault`

---

#### 10. è®¾ç½®é»˜è®¤åœ°å€
**è·¯å¾„**: `PATCH /api/user/address/set-default/{addressId}`
**åŠŸèƒ½**: å°†æŒ‡å®šåœ°å€è®¾ç½®ä¸ºå½“å‰ç”¨æˆ·çš„é»˜è®¤åœ°å€
**è¯·æ±‚å¤´å‚æ•°**:
- `satoken`: ç”¨æˆ·é‰´æƒ Tokenï¼ˆå­—ç¬¦ä¸²ï¼‰
**è·¯å¾„å‚æ•°**:
- `addressId`: åœ°å€ IDï¼ˆå­—ç¬¦ä¸²ï¼Œå¿…å¡«ï¼‰
**å“åº”å­—æ®µ**: æ—  data

---

### é‰´æƒè¯´æ˜

- **éœ€è¦ satoken çš„æ¥å£**ï¼šä»…é™ç”¨æˆ·æ“ä½œè‡ªèº«æ•°æ®æ—¶ä½¿ç”¨ï¼ŒåŒ…æ‹¬ï¼š
  - è·å–ä¸ªäººä¿¡æ¯
  - ä¿®æ”¹ä¸ªäººä¿¡æ¯
  - ä¿®æ”¹å¯†ç 
  - è·å–ç»éªŒç­‰çº§
  - è·å–è®¢å•åˆ—è¡¨
  - è·å–åœ°å€åˆ—è¡¨
  - æ·»åŠ åœ°å€
  - è®¾ç½®é»˜è®¤åœ°å€
- **ä¸éœ€è¦ satoken çš„æ¥å£**ï¼šæ³¨å†Œã€ç™»å½•

---

### å‚æ•°è¯´æ˜

- **å¿…å¡«å‚æ•°**ï¼šåœ¨æ¥å£ä¸­æ˜ç¡®æ ‡æ³¨ requiredï¼Œå¦‚ accountã€usernameã€passwordã€oldPasswordã€newPasswordã€fullAddressã€receiverNameã€receiverPhoneã€‚
- **å¯é€‰å‚æ•°**ï¼šå¦‚ phoneã€emailã€isDefaultã€pageã€sizeã€‚
- **è·¯å¾„å‚æ•°**ï¼šå¦‚ addressIdï¼Œå¿…é¡»æä¾›ä¸”ä¸ºå­—ç¬¦ä¸²ç±»å‹ã€‚

---

### æ•°æ®æƒé™æ§åˆ¶

æ‰€æœ‰æ¶‰åŠç”¨æˆ·æ•°æ®çš„æ“ä½œï¼ˆå¦‚ä¿®æ”¹ä¿¡æ¯ã€æŸ¥çœ‹è®¢å•ã€ç®¡ç†åœ°å€ï¼‰ï¼Œéƒ½åŸºäºå½“å‰ç™»å½•ç”¨æˆ·çš„èº«ä»½è¿›è¡Œé™åˆ¶ï¼Œä¿è¯ç”¨æˆ·åªèƒ½è®¿é—®å’Œä¿®æ”¹è‡ªå·±çš„æ•°æ®ï¼Œç”± satoken æ§åˆ¶æƒé™ã€‚

---

"

---

## ğŸ“ å‰ç«¯é¡¹ç›®ç›®å½•ç»“æ„ï¼ˆVue3 + TSï¼‰

```
src/
â”œâ”€â”€ assets/               # å›¾ç‰‡èµ„æº
â”œâ”€â”€ components/            # å…¬å…±ç»„ä»¶
â”œâ”€â”€ views/                 # é¡µé¢ç»„ä»¶
â”‚   â”œâ”€â”€ home/
â”‚   â”œâ”€â”€ order/
â”‚   â”œâ”€â”€ upload/
â”‚   â””â”€â”€ admin/
â”œâ”€â”€ router/                # è·¯ç”±é…ç½®
â”œâ”€â”€ store/                 # Pinia çŠ¶æ€ç®¡ç†
â”œâ”€â”€ services/              # æ¥å£è¯·æ±‚å°è£…
â”œâ”€â”€ utils/                 # å·¥å…·å‡½æ•°
â”œâ”€â”€ types/                 # TypeScript ç±»å‹å®šä¹‰
â”œâ”€â”€ App.vue
â””â”€â”€ main.ts
```

---

## âœ… Spring Boot åç«¯é¡¹ç›®ç»“æ„æ€»ç»“ï¼ˆç”¨æˆ·æ¨¡å—å·²å®Œæˆï¼‰

### ğŸ“ é¡¹ç›®ç›®å½•ç»“æ„

```
src/
â”œâ”€â”€ main/
â”‚   â”œâ”€â”€ java/
â”‚   â”‚   â””â”€â”€ com.powercess.printersystem.printersystem/
â”‚   â”‚       â”‚ PrinterSystemApplication.java
â”‚   â”‚       â”‚
â”‚   â”‚       â”œâ”€â”€ config/
â”‚   â”‚       â”‚   â””â”€â”€ SaTokenConfig.java        # Sa-Token é‰´æƒé…ç½®
â”‚   â”‚       â”‚
â”‚   â”‚       â”œâ”€â”€ controller/
â”‚   â”‚       â”‚   â””â”€â”€ UserController.java       # ç”¨æˆ·ç›¸å…³æ¥å£
â”‚   â”‚       â”‚
â”‚   â”‚       â”œâ”€â”€ service/
â”‚   â”‚       â”‚   â”œâ”€â”€ UserService.java          # ç”¨æˆ·æœåŠ¡æ¥å£
â”‚   â”‚       â”‚   â”œâ”€â”€ AddressService.java       # åœ°å€æœåŠ¡æ¥å£
â”‚   â”‚       â”‚   â””â”€â”€ impl/
â”‚   â”‚       â”‚       â”œâ”€â”€ UserServiceImpl.java  # ç”¨æˆ·æœåŠ¡å®ç°ç±»
â”‚   â”‚       â”‚       â””â”€â”€ AddressServiceImpl.java # åœ°å€æœåŠ¡å®ç°ç±»
â”‚   â”‚       â”‚
â”‚   â”‚       â”œâ”€â”€ mapper/
â”‚   â”‚       â”‚   â”œâ”€â”€ UserMapper.java           # ç”¨æˆ· Mapper æ¥å£
â”‚   â”‚       â”‚   â””â”€â”€ AddressMapper.java        # åœ°å€ Mapper æ¥å£
â”‚   â”‚       â”‚
â”‚   â”‚       â”œâ”€â”€ model/
â”‚   â”‚       â”‚   â”œâ”€â”€ User.java                 # ç”¨æˆ·å®ä½“ç±»
â”‚   â”‚       â”‚   â””â”€â”€ Address.java              # åœ°å€å®ä½“ç±»
â”‚   â”‚       â”‚
â”‚   â”‚       â”œâ”€â”€ dto/
â”‚   â”‚       â”‚   â””â”€â”€ ResponseResult.java       # ç»Ÿä¸€è¿”å›æ ¼å¼å°è£…ç±»
â”‚   â”‚       â”‚
â”‚   â”‚       â”œâ”€â”€ exception/
â”‚   â”‚       â”‚   â””â”€â”€ GlobalExceptionHandler.java # å…¨å±€å¼‚å¸¸å¤„ç†
â”‚   â”‚       â”‚
â”‚   â”‚       â””â”€â”€ utils/
â”‚   â”‚           â””â”€â”€ PasswordUtils.java        # å¯†ç åŠ å¯†å·¥å…·ç±»
â”‚   â”‚
â”‚   â””â”€â”€ resources/
â”‚       â”œâ”€â”€ application.yml                   # é…ç½®æ–‡ä»¶
â”‚       â””â”€â”€ mapper/
â”‚           â”œâ”€â”€ UserMapper.xml                # ç”¨æˆ· SQL æ˜ å°„æ–‡ä»¶
â”‚           â””â”€â”€ AddressMapper.xml             # åœ°å€ SQL æ˜ å°„æ–‡ä»¶
â”‚
â””â”€â”€ test/
    â””â”€â”€ java/
        â””â”€â”€ com.powercess.printersystem.printersystem/
            â””â”€â”€ PrinterSystemApplicationTests.java
```


è¯·æ ¹æ®ä»¥ä¸‹ Spring Boot é¡¹ç›®ç»“æ„å’Œå·²æœ‰çš„ç”¨æˆ·æ¨¡å—ä»£ç é£æ ¼ï¼Œå¸®æˆ‘ç”Ÿæˆã€è®¢å•æ¨¡å—ã€‘/ã€æ–‡æ¡£æ¨¡å—ã€‘/ã€ç®¡ç†å‘˜æ¨¡å—ã€‘çš„åç«¯ä»£ç ï¼Œè¦æ±‚ï¼š

ä½¿ç”¨ MyBatis + MySQL æ“ä½œæ•°æ®åº“ã€‚
æ‰€æœ‰æ¥å£è¿”å›ç»Ÿä¸€æ ¼å¼ ResponseResult<T>ã€‚
éœ€è¦é‰´æƒçš„æ¥å£ä½¿ç”¨ Sa-Token æ§åˆ¶æƒé™ã€‚
Mapper XML æ–‡ä»¶æ”¾åœ¨ resources/mapper/ ç›®å½•ä¸‹ã€‚
å®ä½“ç±»æ”¾åœ¨ model åŒ…ä¸­ã€‚
Service å±‚æ¥å£ä¸å®ç°åˆ†ç¦»ï¼Œæ”¾åœ¨ service å’Œ service.impl åŒ…ä¸­ã€‚
Controller æ”¾åœ¨ controller åŒ…ä¸­ã€‚
DTO ç»Ÿä¸€å°è£…ä¸º ResponseResult<T>ã€‚
æ•°æ®åº“å­—æ®µå‘½åä¸ Java å­—æ®µè‡ªåŠ¨æ˜ å°„ï¼ˆé©¼å³°è½¬ä¸‹åˆ’çº¿ï¼‰ã€‚
æä¾›å®Œæ•´ CRUD åŠŸèƒ½ï¼ˆæŸ¥è¯¢ã€æ–°å¢ã€æ›´æ–°ã€åˆ é™¤ï¼‰ã€‚
å¯¹äºå¤æ‚ä¸šåŠ¡é€»è¾‘æä¾›äº‹åŠ¡æ”¯æŒã€‚
æ‰€æœ‰æ¥å£è·¯å¾„éµå¾ª /api/xxx æ ¼å¼ã€‚
æ‰€æœ‰æ¥å£å‚æ•°ä½¿ç”¨ JSON æ ¼å¼ä¼ é€’ï¼ˆ@RequestBodyï¼‰ã€‚
æ‰€æœ‰æ•æ„Ÿå­—æ®µï¼ˆå¦‚å¯†ç ï¼‰ä¸åœ¨å“åº”ä¸­è¿”å›ã€‚
æä¾›åˆ†é¡µåŠŸèƒ½ï¼ˆGET è¯·æ±‚ä¸­ page å’Œ size å‚æ•°ï¼‰ã€‚
æ‰€æœ‰æ¥å£éœ€ç¬¦åˆ RESTful é£æ ¼ã€‚
å¦‚æœæ˜¯è®¢å•æ¨¡å—ï¼Œè¿˜éœ€æ¨¡æ‹Ÿæ”¯ä»˜æˆåŠŸçŠ¶æ€å˜æ›´ã€‚
å¦‚æœæ˜¯ç®¡ç†å‘˜æ¨¡å—ï¼Œéœ€æ”¯æŒç¦ç”¨ç”¨æˆ·ã€æŸ¥çœ‹æ‰€æœ‰è®¢å•ç­‰åŠŸèƒ½ã€‚
Mapper æ¥å£åº”æ ‡æ³¨ @Mapper æ³¨è§£ï¼Œå¹¶æ”¾ç½®åœ¨ mapper åŒ…ä¸­ã€‚
Mapper æ¥å£æ–¹æ³•åº”ä¸ XML æ–‡ä»¶ä¸­çš„ SQL è¯­å¥ä¸€ä¸€å¯¹åº”ã€‚
Mapper å¯è¢«ä»»æ„ Service è°ƒç”¨ï¼Œä¿æŒé«˜å†…èšä½è€¦åˆã€‚
ç›®å‰åç«¯ä»£ç æœ‰ï¼šå¯†ç å¤„ç†å·¥å…·ç±»ï¼šâ€œpackage com.powercess.printersystem.printersystem.utils;
                 public class PasswordUtils {
                     public static String hashPassword(String plainText) {......}
                     public static boolean checkPassword(String plainText, String hashed) {......}
                 }â€
å…¨å±€å“åº”DTOï¼šâ€œpackage com.powercess.printersystem.printersystem.dto;

         import lombok.Data;
         @Data
         public class ResponseResult<T> {
             private boolean ifSuccess;
             private int status;
             private String response;
             private T data;
             public static <T> ResponseResult<T> success(T data) {
                 ResponseResult<T> result = new ResponseResult<>();
                 result.setIfSuccess(true);
                 result.setStatus(200);
                 result.setResponse("æ“ä½œæˆåŠŸ");
                 result.setData(data);
                 return result;
             }
             public static <T> ResponseResult<T> error(int status, String message) {
                 ResponseResult<T> result = new ResponseResult<>();
                 result.setIfSuccess(false);
                 result.setStatus(status);
                 result.setResponse(message);
                 return result;
             }
         }â€
å…¨å±€å¼‚å¸¸å¤„ç†ï¼šâ€œpackage com.powercess.printersystem.printersystem.exception;

        import com.powercess.printersystem.printersystem.dto.ResponseResult;
        import org.springframework.http.HttpStatus;
        import org.springframework.web.bind.annotation.ExceptionHandler;
        import org.springframework.web.bind.annotation.RestControllerAdvice;
        @RestControllerAdvice
        public class GlobalExceptionHandler {
            @ExceptionHandler(Exception.class)
            public ResponseResult<String> handleException(Exception e) {
                return ResponseResult.error(HttpStatus.INTERNAL_SERVER_ERROR.value(), e.getMessage());
            }
            // å¯ä»¥æ·»åŠ æ›´å¤šç‰¹å®šå¼‚å¸¸çš„å¤„ç†é€»è¾‘ï¼Œå¦‚å‚æ•°æ ¡éªŒå¤±è´¥ç­‰
        }â€
satokenæ¥å£æ”¾è¡Œç­–ç•¥ï¼šâ€œpackage com.powercess.printersystem.printersystem.config;

               import cn.dev33.satoken.interceptor.SaInterceptor;
               import cn.dev33.satoken.router.SaRouter;
               import cn.dev33.satoken.stp.StpUtil;
               import org.springframework.context.annotation.Configuration;
               import org.springframework.web.servlet.config.annotation.InterceptorRegistry;
               import org.springframework.web.servlet.config.annotation.WebMvcConfigurer;
               @Configuration
               public class SaTokenConfig implements WebMvcConfigurer {
                   // æ³¨å†Œ Sa-Token æ‹¦æˆªå™¨
                   @Override
                   public void addInterceptors(InterceptorRegistry registry) {
                       registry.addInterceptor(new SaInterceptor(handler -> {
                           // å®šä¹‰éœ€è¦é‰´æƒçš„è·¯å¾„å’Œæ”¾è¡Œçš„è·¯å¾„
                           SaRouter.match("/**")              // åŒ¹é…æ‰€æœ‰è·¯å¾„
                                   .notMatch("/api/user/register")  // æ”¾è¡Œæ³¨å†Œæ¥å£
                                   .notMatch("/api/user/login")     // æ”¾è¡Œç™»å½•æ¥å£
                                   .check(r -> StpUtil.checkLogin()); // å…¶ä»–è·¯å¾„éœ€è¦ç™»å½•æ‰èƒ½è®¿é—®
                       })).addPathPatterns("/**");
                   }
               }â€
åç«¯é‡‡ç”¨äº†å¤šç§åº“ï¼Œå¯è§pomæ–‡ä»¶éƒ¨åˆ†å†…å®¹å¦‚ä¸‹ï¼šâ€œ<dependencies>
                                <dependency>
                                    <groupId>org.springframework.boot</groupId>
                                    <artifactId>spring-boot-starter-web</artifactId>
                                </dependency>
                                <dependency>
                                    <groupId>org.springframework.boot</groupId>
                                    <artifactId>spring-boot-configuration-processor</artifactId>
                                    <optional>true</optional>
                                </dependency>
                                <dependency>
                                    <groupId>org.mindrot</groupId>
                                    <artifactId>jbcrypt</artifactId>
                                    <version>0.4</version>
                                </dependency>
                                <dependency>
                                    <groupId>org.projectlombok</groupId>
                                    <artifactId>lombok</artifactId>
                                    <version>1.18.38</version>
                                </dependency>
                                <dependency>
                                    <groupId>com.mysql</groupId>
                                    <artifactId>mysql-connector-j</artifactId>
                                    <scope>runtime</scope>
                                </dependency>
                                <dependency>
                                    <groupId>com.baomidou</groupId>
                                    <artifactId>mybatis-plus-spring-boot3-starter</artifactId>
                                    <version>3.5.12</version>
                                </dependency>
                                <dependency>
                                    <groupId>cn.dev33</groupId>
                                    <artifactId>sa-token-spring-boot3-starter</artifactId>
                                    <version>1.44.0</version>
                                </dependency>
                                <dependency>
                                    <groupId>org.springframework.boot</groupId>
                                    <artifactId>spring-boot-starter-test</artifactId>
                                    <scope>test</scope>
                                </dependency>
                            </dependencies>â€ï¼Œymlä¿¡æ¯å¦‚ä¸‹ï¼šâ€œspring:
                                                        application:
                                                          name: PrinterSystem
                                                        datasource:
                                                          url: jdbc:mysql://localhost:3306/print_service_system?useUnicode=true&characterEncoding=UTF-8&serverTimezone=Asia/Shanghai
                                                          username: root
                                                          password: Pubg20061027
                                                          driver-class-name: com.mysql.cj.jdbc.Driver

                                                      server:
                                                        port: 8080

                                                      mybatis-plus:
                                                        configuration:
                                                          log-impl: org.apache.ibatis.logging.stdout.StdOutImpl
                                                        mapper-locations: classpath*:mapper/**/*.xml

                                                      sa-token:
                                                        token-name: satoken
                                                        timeout: 2592000
                                                        is-concurrent: true
                                                        is-share: true
                                                        is-read-cookie: false
                                                        isPrint: true
                                                        isLog: true

â€ï¼Œç°åœ¨å¯ä»¥åœ¨è¿™äº›åŸºç¡€ä¸Šç»§ç»­å®Œå–„
